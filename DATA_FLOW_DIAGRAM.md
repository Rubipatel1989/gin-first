# Championship Coach Platform - Data Flow Diagram

**Version:** 1.0  
**Date:** 2025

---

## Overview

This document illustrates the data flow and entity relationships in the Championship Coach Platform, showing how organizations, teams, coaches, and players are created and linked together.

---

## 1. Setup Phase - Organization & Coach Setup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SETUP PHASE                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Create Organization
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SuperAdmin/  â”‚
â”‚ OrgAdmin     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Creates
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Organization        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ id: SMALLINT        â”‚
â”‚ name: "ABC College" â”‚
â”‚ type: college       â”‚
â”‚ status: active      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Referenced by
       â–¼

Step 2: Create Coach Account
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SuperAdmin/  â”‚
â”‚ OrgAdmin     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Creates
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ id: BIGINT          â”‚
â”‚ name: "John Coach"  â”‚
â”‚ email: "john@..."   â”‚
â”‚ password_hash: ...  â”‚
â”‚ status: active      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Has role
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Role           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ user_id: BIGINT     â”‚
â”‚ role: 3 (Coach)     â”‚
â”‚ organization_id:    â”‚
â”‚   SMALLINT          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Links to
       â–¼

Step 3: Coach-Organization Link
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Coach Profile       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ user_id: BIGINT     â”‚â”€â”€â”€â”€â”€â”€â”
â”‚ organization_id:    â”‚      â”‚
â”‚   SMALLINT          â”‚      â”‚
â”‚ title: "Head Coach" â”‚      â”‚ Links coach to org
â”‚ status: active      â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Organization        â”‚
                    â”‚ (from Step 1)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: Create Season (Optional but recommended)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OrgAdmin     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Creates
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Season              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ id: SMALLINT        â”‚
â”‚ name: "Fall 2025"   â”‚
â”‚ year: 2025          â”‚
â”‚ start_date: ...     â”‚
â”‚ end_date: ...       â”‚
â”‚ status: active      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 5: Create Team
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OrgAdmin/    â”‚
â”‚ Coach        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Creates
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Team                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ id: INT             â”‚
â”‚ organization_id:    â”‚â”€â”€â”€â”€â”€â”€â”
â”‚   SMALLINT          â”‚      â”‚
â”‚ season_id:          â”‚      â”‚
â”‚   SMALLINT          â”‚      â”‚
â”‚ name: "Varsity BB"  â”‚      â”‚
â”‚ sport_type: "BB"    â”‚      â”‚ Links team to org
â”‚ division: "Varsity" â”‚      â”‚ and season
â”‚ status: active      â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
       â”‚                      â”‚
       â”‚                      â–¼
Step 6: Assign Coach to Team        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                      â”‚     â”‚ Organization       â”‚
       â–¼                      â”‚     â”‚ Season             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Team Member         â”‚       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚       â”‚
â”‚ team_id: INT        â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ user_id: BIGINT     â”‚â”€â”€â”€â”€â”€â”€â”
â”‚ member_type: 1      â”‚      â”‚ Links coach user
â”‚   (coach)           â”‚      â”‚ to team
â”‚ status: active      â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ User (Coach)        â”‚
                    â”‚ (from Step 2)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Player Onboarding Phase

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PLAYER ONBOARDING PHASE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Create Player Account
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Coach/       â”‚  OR  â”‚ OrgAdmin/    â”‚  OR  â”‚ Player       â”‚
â”‚ OrgAdmin     â”‚      â”‚ SuperAdmin   â”‚      â”‚ (Self-signup)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚                     â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ Creates
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ id: BIGINT          â”‚
â”‚ name: "Jane Player" â”‚
â”‚ email: "jane@..."   â”‚
â”‚ password_hash: ...  â”‚
â”‚ status: active      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Has role
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Role           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ user_id: BIGINT     â”‚
â”‚ role: 5 (Player)    â”‚
â”‚ organization_id:    â”‚
â”‚   SMALLINT          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Referenced by
       â–¼

Step 2: Add Player to Team
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Coach        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Adds player to team
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Team Member         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ team_id: INT        â”‚â”€â”€â”€â”€â”€â”€â”
â”‚ user_id: BIGINT     â”‚      â”‚ Links player to team
â”‚ member_type: 2      â”‚      â”‚ (NOT to coach directly)
â”‚   (player)          â”‚      â”‚
â”‚ jersey_number: 10   â”‚      â”‚
â”‚ position: "Guard"   â”‚      â”‚
â”‚ status: active      â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
                    â–¼                 â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Team             â”‚  â”‚ User (Player)    â”‚
         â”‚ (from Setup)     â”‚  â”‚ (from Step 1)    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Complete Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ENTITY RELATIONSHIP DIAGRAM                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER       â”‚
â”‚  (BIGINT)    â”‚
â”‚              â”‚
â”‚ id           â”‚â—„â”€â”€â”
â”‚ name         â”‚   â”‚
â”‚ email        â”‚   â”‚
â”‚ password     â”‚   â”‚
â”‚ status       â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
       â”‚           â”‚
       â”‚           â”‚ Referenced by
       â”‚           â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    â”‚                                 â”‚
       â”‚    â–¼                                 â–¼
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  â”‚  USER_ROLES     â”‚      â”‚ COACH_PROFILES  â”‚
       â”‚  â”‚  (BIGINT)       â”‚      â”‚ (INT)           â”‚
       â”‚  â”‚                 â”‚      â”‚                 â”‚
       â”‚  â”‚ user_id â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ user_id â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚  â”‚ role (TINYINT)         â”‚ organization_id â”‚
       â”‚  â”‚ organization_id        â”‚ title           â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ status          â”‚
       â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                     â”‚
       â”‚                                     â”‚ Links to
       â”‚                                     â–¼
       â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                            â”‚ ORGANIZATION    â”‚
       â”‚                            â”‚ (SMALLINT)      â”‚
       â”‚                            â”‚                 â”‚
       â”‚                            â”‚ id              â”‚
       â”‚                            â”‚ name            â”‚
       â”‚                            â”‚ type            â”‚
       â”‚                            â”‚ status          â”‚
       â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                     â”‚
       â”‚                                     â”‚ Has many
       â”‚                                     â–¼
       â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                            â”‚     TEAM        â”‚
       â”‚                            â”‚     (INT)       â”‚
       â”‚                            â”‚                 â”‚
       â”‚                            â”‚ id              â”‚
       â”‚                            â”‚ organization_id â”‚â—„â”€â”€â”
       â”‚                            â”‚ season_id       â”‚   â”‚
       â”‚                            â”‚ name            â”‚   â”‚
       â”‚                            â”‚ sport_type      â”‚   â”‚
       â”‚                            â”‚ division        â”‚   â”‚
       â”‚                            â”‚ status          â”‚   â”‚
       â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
       â”‚                                     â”‚            â”‚
       â”‚                                     â”‚ Has many   â”‚
       â”‚                                     â–¼            â”‚
       â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
       â”‚                            â”‚  TEAM_MEMBERS   â”‚  â”‚
       â”‚                            â”‚  (BIGINT)       â”‚  â”‚
       â”‚                            â”‚                 â”‚  â”‚
       â”‚                            â”‚ team_id â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
       â”‚                            â”‚ user_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚ member_type:       â”‚
       â”‚                            â”‚   1=coach          â”‚
       â”‚                            â”‚   2=player         â”‚
       â”‚                            â”‚ jersey_number      â”‚
       â”‚                            â”‚ position           â”‚
       â”‚                            â”‚ status             â”‚
       â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Referenced by (other services)
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                       â”‚
       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EVENTS     â”‚      â”‚ ANNOUNCEMENTSâ”‚      â”‚    VIDEOS    â”‚
â”‚  (BIGINT)    â”‚      â”‚  (BIGINT)    â”‚      â”‚  (BIGINT)    â”‚
â”‚              â”‚      â”‚              â”‚      â”‚              â”‚
â”‚ team_id â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º team_id   â”‚      â”‚ team_id      â”‚
â”‚ created_by â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º user_id   â”‚
â”‚              â”‚      â”‚ created_by   â”‚      â”‚ uploaded_by  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. User Roles & Permissions Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER ROLES & PERMISSIONS                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SuperAdmin  â”‚
â”‚  (Role: 1)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Can create/manage
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Organizations
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Any User (Coach, OrgAdmin, Player)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º All Teams (any organization)
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º System-wide settings

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   OrgAdmin   â”‚
â”‚  (Role: 2)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Can create/manage (within their organization only)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Teams (in their org)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Coaches (in their org)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Players (in their org)
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Organization settings

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Coach     â”‚
â”‚  (Role: 3)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Can manage (teams they're assigned to)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Players (add to team)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Events (practices, games)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Announcements
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Videos
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Statistics
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Roster Lists
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Game Day Plans

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Player     â”‚
â”‚  (Role: 5)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Can view/manage (their own data only)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Own Statistics
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Own Videos (tagged)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Team Schedule (their teams)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Announcements (for their teams)
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Own Development Data
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Own Life Goals
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Own Recruiting Profile
```

---

## 5. Data Flow: Player Joins Team (Detailed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DETAILED FLOW: PLAYER JOINS TEAM                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Coach      â”‚
                    â”‚  (User ID)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Action: Add Player to Team
                           â”‚ API: POST /api/v1/teams/{teamId}/members
                           â”‚
                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      Roster Service                  â”‚
        â”‚  (team_members table)                â”‚
        â”‚                                      â”‚
        â”‚  INSERT INTO team_members:           â”‚
        â”‚    - team_id: INT                    â”‚
        â”‚    - user_id: BIGINT (player)        â”‚
        â”‚    - member_type: 2 (player)         â”‚
        â”‚    - status: 1 (active)              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Creates record
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      Database                        â”‚
        â”‚                                      â”‚
        â”‚  team_members                        â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
        â”‚  id: 12345                           â”‚
        â”‚  team_id: 100                        â”‚
        â”‚  user_id: 500                        â”‚
        â”‚  member_type: 2                      â”‚
        â”‚  status: 1                           â”‚
        â”‚  joined_at: 2025-01-15 10:30:00     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Triggers
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Membership History                 â”‚
        â”‚   (Audit Trail)                      â”‚
        â”‚                                      â”‚
        â”‚  INSERT INTO membership_history:     â”‚
        â”‚    - team_id: 100                    â”‚
        â”‚    - user_id: 500                    â”‚
        â”‚    - action: 1 (added)               â”‚
        â”‚    - performed_by: 200 (coach)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Publishes event
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Event Bus (NATS)                   â”‚
        â”‚                                      â”‚
        â”‚  Event: PlayerAddedToTeam            â”‚
        â”‚  {                                   â”‚
        â”‚    team_id: 100,                     â”‚
        â”‚    user_id: 500,                     â”‚
        â”‚    added_by: 200                     â”‚
        â”‚  }                                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Notifies other services
                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚                 â”‚
                   â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Notification     â”‚  â”‚ Communication    â”‚
        â”‚ Service          â”‚  â”‚ Service          â”‚
        â”‚                  â”‚  â”‚                  â”‚
        â”‚ Sends welcome    â”‚  â”‚ Grants access to â”‚
        â”‚ notification to  â”‚  â”‚ team announcementsâ”‚
        â”‚ player           â”‚  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Cross-Service Data References

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CROSS-SERVICE DATA REFERENCES                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Service   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  users          â”‚â—„â”€â”€â”€â”
â”‚  user_roles     â”‚    â”‚
â”‚  refresh_tokens â”‚    â”‚ Referenced by ALL services
â”‚  password_resetsâ”‚    â”‚ (via user_id: BIGINT)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  Org Service    â”‚    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  organizations  â”‚â—„â”€â”€â”€â”¤
â”‚  teams          â”‚â—„â”€â”€â”€â”¤ Referenced by multiple services
â”‚  seasons        â”‚    â”‚ (via organization_id: SMALLINT,
â”‚  coach_profiles â”‚    â”‚  team_id: INT)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  Roster Service â”‚    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  team_members   â”‚â”€â”€â”€â”€â”˜ Uses: team_id, user_id
â”‚  roster_lists   â”‚â”€â”€â”€â” Uses: team_id
â”‚  roster_items   â”‚   â”‚
â”‚  membership_    â”‚   â”‚
â”‚    history      â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  Event Service  â”‚   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  events         â”‚â”€â”€â”€â”˜ Uses: team_id, created_by (user_id)
â”‚  game_day_plans â”‚â”€â”€â”€â” Uses: event_id
â”‚  event_rsvps    â”‚   â”‚ Uses: event_id, user_id
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  Comm Service   â”‚   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  announcements  â”‚â”€â”€â”€â”˜ Uses: team_id, created_by (user_id)
â”‚  announcement_  â”‚â”€â”€â”€â” Uses: announcement_id, user_id
â”‚    recipients   â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  Media Service  â”‚   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  videos         â”‚â”€â”€â”€â”˜ Uses: team_id, uploaded_by (user_id)
â”‚  video_tags     â”‚â”€â”€â”€â” Uses: video_id, player_id (user_id)
â”‚  video_         â”‚   â”‚
â”‚    permissions  â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  Stats Service  â”‚   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  game_stats     â”‚â”€â”€â”€â”˜ Uses: event_id, player_id (user_id)
â”‚  effort_metrics â”‚â”€â”€â”€â” Uses: event_id, player_id (user_id)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ Development     â”‚   â”‚
â”‚  Service        â”‚   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  leadership_    â”‚â”€â”€â”€â”˜ Uses: player_id, coach_id (user_id)
â”‚    notes        â”‚   â”‚        event_id
â”‚  buy_in_scores  â”‚â”€â”€â”€â” Uses: event_id, player_id
â”‚  academic_      â”‚   â”‚ Uses: player_id
â”‚    entries      â”‚   â”‚
â”‚  life_goals     â”‚   â”‚ Uses: player_id
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  Recruiting     â”‚   â”‚
â”‚  Service        â”‚   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  recruiting_    â”‚â”€â”€â”€â”˜ Uses: player_id (user_id)
â”‚    profiles     â”‚   â”‚
â”‚  profile_shares â”‚â”€â”€â”€â” Uses: profile_id, created_by
â”‚  profile_       â”‚   â”‚ Uses: profile_id, granted_to
â”‚    permissions  â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
```

---

## 7. Complete Setup Sequence Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SETUP SEQUENCE DIAGRAM                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SuperAdmin        Org Service         Auth Service        Roster Service
    â”‚                  â”‚                    â”‚                   â”‚
    â”‚ 1. Create Org    â”‚                    â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                   â”‚
    â”‚                  â”‚ Store in DB        â”‚                   â”‚
    â”‚                  â”‚ organizations      â”‚                   â”‚
    â”‚                  â”‚                    â”‚                   â”‚
    â”‚ 2. Create Coach  â”‚                    â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
    â”‚                  â”‚                    â”‚ Create user       â”‚
    â”‚                  â”‚                    â”‚ Store in users    â”‚
    â”‚                  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚                  â”‚                    â”‚                   â”‚
    â”‚ 3. Assign Role   â”‚                    â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
    â”‚                  â”‚                    â”‚ Create user_role  â”‚
    â”‚                  â”‚                    â”‚ role=Coach        â”‚
    â”‚                  â”‚                    â”‚                   â”‚
    â”‚ 4. Link Coach    â”‚                    â”‚                   â”‚
    â”‚    to Org        â”‚                    â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                   â”‚
    â”‚                  â”‚ Create             â”‚                   â”‚
    â”‚                  â”‚ coach_profile      â”‚                   â”‚
    â”‚                  â”‚                    â”‚                   â”‚
    â”‚ 5. Create Team   â”‚                    â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                   â”‚
    â”‚                  â”‚ Create team        â”‚                   â”‚
    â”‚                  â”‚ Store in teams     â”‚                   â”‚
    â”‚                  â”‚                    â”‚                   â”‚
    â”‚ 6. Assign Coach  â”‚                    â”‚                   â”‚
    â”‚    to Team       â”‚                    â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                  â”‚                    â”‚                   â”‚ Create team_member
    â”‚                  â”‚                    â”‚                   â”‚ member_type=coach
    â”‚                  â”‚                    â”‚                   â”‚
    â”‚ 7. Add Player    â”‚                    â”‚                   â”‚
    â”‚    to Team       â”‚                    â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                  â”‚                    â”‚                   â”‚ Create team_member
    â”‚                  â”‚                    â”‚                   â”‚ member_type=player
    â”‚                  â”‚                    â”‚                   â”‚ Create membership_history
```

---

## 8. Key Takeaways

### âœ… Workflow:
1. **Organization** is created first (by SuperAdmin/OrgAdmin)
2. **Coach account** is created (by SuperAdmin/OrgAdmin)
3. **Coach is linked to Organization** via `coach_profiles` table
4. **Team is created** within Organization
5. **Coach is assigned to Team** via `team_members` table (`member_type=1`)
6. **Player account is created** (by Coach/OrgAdmin/Self-signup)
7. **Player is added to Team** via `team_members` table (`member_type=2`)

### ðŸ“Š Relationship Summary:
- **Direct Relationships**:
  - User â†” Organization (via `coach_profiles` for coaches)
  - User â†” Team (via `team_members` for both coaches and players)
  - Organization â†” Team (via `teams.organization_id`)
  - Team â†” Season (via `teams.season_id`)

- **Indirect Relationships**:
  - Coach â†” Player (via shared Team membership in `team_members`)

---

## 9. Database Table Dependencies

```
Dependency Chain (Creation Order):

1. users (Auth Service)
   â”‚
   â”œâ”€â”€> user_roles (Auth Service)
   â”‚
   â”œâ”€â”€> coach_profiles (Org Service)
   â”‚     â””â”€â”€> organizations (Org Service)
   â”‚
   â””â”€â”€> team_members (Roster Service)
         â””â”€â”€> teams (Org Service)
               â”œâ”€â”€> organizations (Org Service)
               â””â”€â”€> seasons (Org Service)

Reference Chain (Query Dependencies):

To get a player's coach:
  1. Get player's team_id from team_members (where user_id=player_id, member_type=2)
  2. Get coaches from team_members (where team_id=player_team_id, member_type=1)
  3. Get coach details from users (where id=coach_user_id)

To get all players for a coach:
  1. Get coach's teams from team_members (where user_id=coach_id, member_type=1)
  2. Get all players from team_members (where team_id IN coach_team_ids, member_type=2)
  3. Get player details from users (where id IN player_user_ids)
```

---

**Document Status**: Ready for Implementation  
**Last Updated**: 2025

